{"version":3,"file":"js/210.efe7bc15.js","mappings":"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","sources":["webpack://groupomania-v1.0/./src/components/HeaderLog.vue","webpack://groupomania-v1.0/./src/components/HeaderLog.vue?84e2","webpack://groupomania-v1.0/./src/views/LoginView.vue","webpack://groupomania-v1.0/./src/views/LoginView.vue?5755"],"sourcesContent":["<script>\nexport default {\n  name: \"HeaderLog\",\n  props: [\"\"],\n};\n</script>\n\n<template>\n  <header class=\"header header--log\">\n    <div>\n      <figure>\n        <img\n          src=\"../assets/icon-left-font-monochrome-black.svg\"\n          alt=\"Logo Groupomania\"\n        />\n      </figure>\n    </div>\n    <nav>\n      <router-link to=\"/signup\">S'inscrire</router-link>\n      <router-link to=\"/login\">Se connecter</router-link>\n    </nav>\n  </header>\n</template>\n","import { render } from \"./HeaderLog.vue?vue&type=template&id=a9707dba\"\nimport script from \"./HeaderLog.vue?vue&type=script&lang=js\"\nexport * from \"./HeaderLog.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/clemencebonneaud/Desktop/Dev/OpenClassrooms/Cours/OC_P7/code/frontend/groupomania-v1.0/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<!-- ////////////////////////////////////////////////// -->\n<!--                      TEMPLATE                      -->    \n<!-- ////////////////////////////////////////////////// -->\n\n<template>\n  <div class=\"signup\">\n    <!-- Header -->\n    <HeaderLog />\n\n    <h1>{{ titre }}</h1>\n\n    <!-- Formulaire -->\n    <div class=\"bloc\">\n      <form>\n        <label>Email</label>\n        <input v-model=\"email\" type=\"email\" @keyup=\"analyseEmail()\" />\n        <!-- Message qui apparaît si le champ est mal rempli -->\n        <p class=\"formMessage\" v-if=\"emailDisplayed\">\n          Veuillez saisir un email valide\n        </p>\n\n        <label>Mot de passe</label>\n        <input v-model=\"password\" type=\"password\" @change=\"checkPassword()\" />\n        <p class=\"formMessage\" v-if=\"passwordDisplayed\">\n          Veuillez saisir un mot de passe\n        </p>\n      </form>\n\n      <!-- Message d'erreur en cas d'erreur côté serveur -->\n      <p v-if=\"errorMessage\" class=\"errorMessage\">\n        Oups ! Il semble que {{ errorMessage }}\n      </p>\n\n      <!-- Bouton désactivé -->\n      <button v-if=\"!validatedFields()\" class=\"bouton bouton--disabled\">\n        Se connecter\n      </button>\n\n      <!-- Bouton activé -->\n      <button v-if=\"validatedFields()\" class=\"bouton\" @click=\"loginAccount()\">\n        Se connecter\n      </button>\n    </div>\n  </div>\n</template>\n\n<!-- ////////////////////////////////////////////////// -->\n<!--                       SCRIPT                       -->    \n<!-- ////////////////////////////////////////////////// -->\n\n<script>\n// Header\nimport HeaderLog from \"@/components/HeaderLog.vue\";\n\n// Axios\nconst axios = require(\"axios\");\nconst instance = axios.create({\n  baseURL: \"http://localhost:3000/api/\",\n});\n\nexport default {\n  name: \"LoginView\",\n  props: [\"\"],\n  data() {\n    return {\n      titre: \"Se connecter\",\n      email: \"\",\n      password: \"\",\n      emailDisplayed: false,\n      passwordDisplayed: false,\n      errorMessage: null,\n      sessionToken: null,\n    };\n  },\n  methods: {\n    // Vérification Regex + gestion affichage message d'erreur\n    analyseEmail: function () {\n      let regEmail = new RegExp(\"[a-z0-9]+@[a-z]+[.]+[a-z]{2,3}\");\n      let testEmail = regEmail.exec(this.email);\n      if (testEmail) {\n        this.emailDisplayed = false;\n      } else {\n        this.emailDisplayed = true;\n      }\n    },\n\n    // Vérification présence mot de passe et gestion affichage message d'erreur\n    checkPassword: function () {\n      if (this.password != \"\") {\n        this.passwordDisplayed = false;\n      } else {\n        this.passwordDisplayed = true;\n      }\n    },\n\n    // Vérification de tous les champs et gestion activation/désactivation du bouton \"se connecter\"\n    validatedFields: function () {\n      let regEmail = new RegExp(\"[a-z0-9]+@[a-z]+[.]+[a-z]{2,3}\");\n      let testEmail = regEmail.exec(this.email);\n\n      if (testEmail && this.password != \"\") {\n        return true;\n      } else {\n        return false;\n      }\n    },\n\n    // Envoi API - connection utilisateur déjà existant\n    loginAccount: function () {\n      let userInfos = {\n        email: this.email,\n        password: this.password,\n      };\n\n      instance\n        .post(\"auth/login\", userInfos)\n        .then((response) => {\n          this.$store.state.sessionToken = response.data.token; // Récupération du token dans le state\n          this.$store.state.userId = response.data.userId; // Récupération du userId dans le state\n          this.$router.push(\"/\"); // Redirection vers accueil\n        })\n        .catch((error) => {\n          console.log(error);\n          this.errorMessage = error.response.data.error; // Affichage du message d'erreur\n        });\n    },\n  },\n  components: { HeaderLog },\n};\n</script>\n","import { render } from \"./LoginView.vue?vue&type=template&id=4d2c815a\"\nimport script from \"./LoginView.vue?vue&type=script&lang=js\"\nexport * from \"./LoginView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/clemencebonneaud/Desktop/Dev/OpenClassrooms/Cours/OC_P7/code/frontend/groupomania-v1.0/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","src","_imports_0","alt","_createElementBlock","_hoisted_2","_createVNode","_component_router_link","to","name","props","__exports__","render","_component_HeaderLog","_toDisplayString","$data","_hoisted_3","$event","type","onKeyup","$options","_hoisted_5","onChange","onClick","axios","require","instance","create","baseURL","data","titre","email","password","emailDisplayed","passwordDisplayed","errorMessage","sessionToken","methods","analyseEmail","regEmail","RegExp","testEmail","exec","this","checkPassword","validatedFields","loginAccount","userInfos","post","then","response","$store","state","token","userId","$router","push","catch","error","console","log","components","HeaderLog"],"sourceRoot":""}