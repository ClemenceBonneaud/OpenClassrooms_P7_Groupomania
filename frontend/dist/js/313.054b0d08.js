"use strict";(self["webpackChunkgroupomania_v1_0"]=self["webpackChunkgroupomania_v1_0"]||[]).push([[313],{5313:function(e,t,i){i.r(t),i.d(t,{default:function(){return f}});var n=i(3396),l=i(7139),s=i(9242);const o={class:"publication"},a={class:"bloc"},r=(0,n._)("label",null,"Titre",-1),c={key:0,class:"formMessage"},u={key:1,class:"formMessage",id:"articleMessage"},d={key:0,class:"errorMessage"},p={key:1,class:"bouton bouton--disabled"};function h(e,t,i,h,b,g){const k=(0,n.up)("HeaderHome");return(0,n.wg)(),(0,n.iD)("div",o,[(0,n.Wm)(k),(0,n._)("h1",null,(0,l.zw)(b.titre),1),(0,n._)("div",a,[(0,n._)("form",null,[r,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>b.title=e),type:"text",onChange:t[1]||(t[1]=e=>g.checkTitle())},null,544),[[s.nr,b.title]]),b.titleDisplayed?((0,n.wg)(),(0,n.iD)("p",c," Veuillez écrire un titre ")):(0,n.kq)("",!0),(0,n.wy)((0,n._)("textarea",{placeholder:"Votre article","onUpdate:modelValue":t[2]||(t[2]=e=>b.content=e),onChange:t[3]||(t[3]=e=>g.checkContent())},null,544),[[s.nr,b.content]]),b.contentDisplayed?((0,n.wg)(),(0,n.iD)("p",u," Veuillez écrire un article ")):(0,n.kq)("",!0)]),b.errorMessage?((0,n.wg)(),(0,n.iD)("p",d," Oups ! Il semble que "+(0,l.zw)(b.errorMessage),1)):(0,n.kq)("",!0),g.validatedFields()?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("button",p," Publier ")),g.validatedFields()?((0,n.wg)(),(0,n.iD)("button",{key:2,class:"bouton",onClick:t[4]||(t[4]=e=>g.publishArticle())}," Publier ")):(0,n.kq)("",!0)])])}var b=i(2026);const g=i(6265),k=g.create({baseURL:"http://localhost:3000/api/"});var y={name:"PublicationView",path:"/publication",props:[""],data(){return{titre:"Publier un article",title:"",content:"",titleDisplayed:!1,contentDisplayed:!1,errorMessage:null}},methods:{checkTitle:function(){""!=this.title?this.titleDisplayed=!1:this.titleDisplayed=!0},checkContent:function(){""!=this.content?this.contentDisplayed=!1:this.contentDisplayed=!0},validatedFields:function(){return""!=this.title&&""!=this.content},publishArticle:function(){let e={title:this.title,content:this.content};k.post("article/",e,{headers:{Authorization:"bearer "+this.$store.state.sessionToken}}).then((e=>{console.log(e),this.$router.push("/")})).catch((e=>{console.log(e),this.errorMessage=e.response.data.error}))}},components:{HeaderHome:b.Z}},m=i(89);const D=(0,m.Z)(y,[["render",h]]);var f=D}}]);
//# sourceMappingURL=313.054b0d08.js.map