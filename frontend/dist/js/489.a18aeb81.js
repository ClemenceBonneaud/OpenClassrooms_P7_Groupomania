"use strict";(self["webpackChunkgroupomania_v1_0"]=self["webpackChunkgroupomania_v1_0"]||[]).push([[489],{489:function(t,o,e){e.r(o),e.d(o,{default:function(){return k}});var i=e(3396),l=e(7139);const r={class:"profil"},n={class:"bloc"},s={class:"profilInfo"},a={class:"profilEdit"},u=(0,i.Uk)("Modifier"),c={key:0,class:"bloc"},p=(0,i._)("h3",null," Vous n'avez publié aucun article ",-1),d=[p],f={id:"date"};function h(t,o,e,p,h,m){const b=(0,i.up)("HeaderHome"),_=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",r,[(0,i.Wm)(b),(0,i._)("h1",null,(0,l.zw)(h.titre),1),(0,i._)("div",n,[(0,i._)("div",s,[(0,i._)("p",null,(0,l.zw)(h.profil.nom),1),(0,i._)("p",null,(0,l.zw)(h.profil.prenom),1),(0,i._)("p",null,(0,l.zw)(h.profil.job),1)]),(0,i._)("div",a,[(0,i.Wm)(_,{to:"/monprofil/modification",class:"bouton"},{default:(0,i.w5)((()=>[u])),_:1}),(0,i._)("a",{class:"bouton",onClick:o[0]||(o[0]=(...t)=>m.supprimerProfil&&m.supprimerProfil(...t))},"Supprimez")])]),(0,i._)("h2",null,(0,l.zw)(h.sousTitre),1),h.publication?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",c,d)),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(h.articles,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"bloc",key:t.titre},[(0,i._)("h4",null,(0,l.zw)(t.titre),1),(0,i._)("p",null,(0,l.zw)(t.contenu),1),(0,i._)("div",f,[(0,i._)("p",null,"Publié le "+(0,l.zw)(t.date),1),(0,i._)("a",{class:"bouton",onClick:o[1]||(o[1]=t=>m.supprimerArticle())},"Supprimer")])])))),128))])}var m=e(2026);const b=e(6265),_=b.create({baseURL:"http://localhost:3000/api/"});var v={name:"ProfilDetail",path:"/monprofil",props:[""],data(){return{titre:"Profil",sousTitre:"Publications",profil:{nom:"",prenom:"",job:""},articles:[],publication:!1}},mounted(){const t=new WebSocket("ws://localhost:8080");t.addEventListener("error",(function(t){console.log("WebSocket error: ",t)}));const o=this.$store.state.userId;_.get(`auth/infos/${o}`).then((t=>{this.profil.nom=t.data.userFound.lastName,this.profil.prenom=t.data.userFound.firstName,this.profil.job=t.data.userFound.job})).catch((t=>{console.log(t)})),_.get(`article/${o}`).then((t=>{let o=0;for(o=0;o<t.data.length;o+=1){let e=t.data[o],i=e.createdAt,l=i.substr(0,10);this.articles.push({titre:e.title,contenu:e.text,date:l})}0!=t.data.length&&(this.publication=!0)})).catch((t=>{console.log(t)}))},methods:{supprimerProfil:function(){let t=confirm("Êtes-vous certain de vouloir supprimer votre profil ?");if(t){const t=this.$store.state.userId;_.delete(`auth/delete/${t}`).then((t=>{console.log(t),this.$router.push("/signup")})).catch((t=>{console.log(t)}))}},publicationCheck:function(){return 1==this.publication},supprimerArticle:function(){console.log("///////")}},components:{HeaderHome:m.Z}},g=e(89);const w=(0,g.Z)(v,[["render",h]]);var k=w}}]);
//# sourceMappingURL=489.a18aeb81.js.map