"use strict";(self["webpackChunkgroupomania_v1_0"]=self["webpackChunkgroupomania_v1_0"]||[]).push([[210],{4068:function(e,s,a){a.d(s,{Z:function(){return g}});var o=a(3396),n=a(5348);const t={class:"header header--log"},l=(0,o._)("div",null,[(0,o._)("figure",null,[(0,o._)("img",{src:n,alt:"Logo Groupomania"})])],-1),i=(0,o.Uk)("S'inscrire"),r=(0,o.Uk)("Se connecter");function u(e,s,a,n,u,d){const c=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("header",t,[l,(0,o._)("nav",null,[(0,o.Wm)(c,{to:"/signup"},{default:(0,o.w5)((()=>[i])),_:1}),(0,o.Wm)(c,{to:"/login"},{default:(0,o.w5)((()=>[r])),_:1})])])}var d={name:"HeaderLog",props:[""]},c=a(89);const p=(0,c.Z)(d,[["render",u]]);var g=p},8210:function(e,s,a){a.r(s),a.d(s,{default:function(){return _}});var o=a(3396),n=a(7139),t=a(9242);const l={class:"signup"},i={class:"bloc"},r=(0,o._)("label",null,"Email",-1),u={key:0,class:"formMessage"},d=(0,o._)("label",null,"Mot de passe",-1),c={key:1,class:"formMessage"},p={key:0,class:"errorMessage"},g={key:1,class:"bouton bouton--disabled"};function m(e,s,a,m,w,h){const k=(0,o.up)("HeaderLog");return(0,o.wg)(),(0,o.iD)("div",l,[(0,o.Wm)(k),(0,o._)("h1",null,(0,n.zw)(w.titre),1),(0,o._)("div",i,[(0,o._)("form",null,[r,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>w.email=e),type:"email",onKeyup:s[1]||(s[1]=e=>h.analyseEmail())},null,544),[[t.nr,w.email]]),w.emailDisplayed?((0,o.wg)(),(0,o.iD)("p",u," Veuillez saisir un email valide ")):(0,o.kq)("",!0),d,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>w.password=e),type:"password",onChange:s[3]||(s[3]=e=>h.checkPassword())},null,544),[[t.nr,w.password]]),w.passwordDisplayed?((0,o.wg)(),(0,o.iD)("p",c," Veuillez saisir un mot de passe ")):(0,o.kq)("",!0)]),w.errorMessage?((0,o.wg)(),(0,o.iD)("p",p," Oups ! Il semble que "+(0,n.zw)(w.errorMessage),1)):(0,o.kq)("",!0),h.validatedFields()?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("button",g," Se connecter ")),h.validatedFields()?((0,o.wg)(),(0,o.iD)("button",{key:2,class:"bouton",onClick:s[4]||(s[4]=e=>h.loginAccount())}," Se connecter ")):(0,o.kq)("",!0)])])}var w=a(4068);const h=a(6265),k=h.create({baseURL:"http://localhost:3000/api/"});var f={name:"LoginView",props:[""],data(){return{titre:"Se connecter",email:"",password:"",emailDisplayed:!1,passwordDisplayed:!1,errorMessage:null,sessionToken:null}},methods:{analyseEmail:function(){let e=new RegExp("[a-z0-9]+@[a-z]+[.]+[a-z]{2,3}"),s=e.exec(this.email);this.emailDisplayed=!s},checkPassword:function(){""!=this.password?this.passwordDisplayed=!1:this.passwordDisplayed=!0},validatedFields:function(){let e=new RegExp("[a-z0-9]+@[a-z]+[.]+[a-z]{2,3}"),s=e.exec(this.email);return!(!s||""==this.password)},loginAccount:function(){let e={email:this.email,password:this.password};k.post("auth/login",e).then((e=>{this.$store.state.sessionToken=e.data.token,this.$store.state.userId=e.data.userId,this.$router.push("/")})).catch((e=>{console.log(e),this.errorMessage=e.response.data.error}))}},components:{HeaderLog:w.Z}},y=a(89);const v=(0,y.Z)(f,[["render",m]]);var _=v},5348:function(e,s,a){e.exports=a.p+"img/icon-left-font-monochrome-black.6906c026.svg"}}]);
//# sourceMappingURL=210.efe7bc15.js.map