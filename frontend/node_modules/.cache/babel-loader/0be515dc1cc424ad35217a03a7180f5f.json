{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, withCtx as _withCtx } from \"vue\";\nconst _hoisted_1 = {\n  class: \"profil\"\n};\nconst _hoisted_2 = {\n  class: \"bloc\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"label\", null, \"Nom\", -1\n/* HOISTED */\n);\n\nconst _hoisted_4 = {\n  key: 0,\n  class: \"formMessage\"\n};\n\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\" Veuillez saisir un nom valide \");\n\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"label\", null, \"Prenom\", -1\n/* HOISTED */\n);\n\nconst _hoisted_7 = {\n  key: 1,\n  class: \"formMessage\"\n};\n\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"label\", null, \"Poste au sein de l'entreprise\", -1\n/* HOISTED */\n);\n\nconst _hoisted_9 = {\n  key: 2,\n  class: \"formMessage\"\n};\n\nconst _hoisted_10 = /*#__PURE__*/_createElementVNode(\"label\", null, \"Email\", -1\n/* HOISTED */\n);\n\nconst _hoisted_11 = {\n  key: 3,\n  class: \"formMessage\"\n};\n\nconst _hoisted_12 = /*#__PURE__*/_createElementVNode(\"label\", null, \"Mot de passe\", -1\n/* HOISTED */\n);\n\nconst _hoisted_13 = {\n  key: 4,\n  class: \"formMessage\"\n};\nconst _hoisted_14 = {\n  key: 0,\n  class: \"errorMessage\"\n};\nconst _hoisted_15 = {\n  class: \"profilEdit\"\n};\nconst _hoisted_16 = {\n  key: 0,\n  class: \"bouton bouton--disabled\"\n};\n\nconst _hoisted_17 = /*#__PURE__*/_createTextVNode(\"Annuler\");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_HeaderHome = _resolveComponent(\"HeaderHome\");\n\n  const _component_router_link = _resolveComponent(\"router-link\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" Header \"), _createVNode(_component_HeaderHome), _createElementVNode(\"h1\", null, _toDisplayString($data.titre), 1\n  /* TEXT */\n  ), _createCommentVNode(\" Formulaire \"), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"form\", null, [_hoisted_3, _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _ctx.nom = $event),\n    type: \"text\"\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, _ctx.nom]]), !_ctx.nomRegexValid() ? (_openBlock(), _createElementBlock(\"p\", _hoisted_4, [_createCommentVNode(\" Message qui apparaît si le champ est mal rempli \"), _hoisted_5])) : _createCommentVNode(\"v-if\", true), _hoisted_6, _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => _ctx.prenom = $event),\n    type: \"text\"\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, _ctx.prenom]]), !_ctx.prenomRegexValid() ? (_openBlock(), _createElementBlock(\"p\", _hoisted_7, \" Veuillez saisir un prénom valide \")) : _createCommentVNode(\"v-if\", true), _hoisted_8, _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => _ctx.job = $event),\n    type: \"text\"\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, _ctx.job]]), !_ctx.jobRegexValid() ? (_openBlock(), _createElementBlock(\"p\", _hoisted_9, \" Veuillez saisir un poste valide \")) : _createCommentVNode(\"v-if\", true), _hoisted_10, _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => _ctx.email = $event),\n    type: \"email\",\n    onKeyup: _cache[4] || (_cache[4] = $event => _ctx.analyseEmail())\n  }, null, 544\n  /* HYDRATE_EVENTS, NEED_PATCH */\n  ), [[_vModelText, _ctx.email]]), _ctx.emailDisplayed ? (_openBlock(), _createElementBlock(\"p\", _hoisted_11, \" Veuillez saisir un email valide \")) : _createCommentVNode(\"v-if\", true), _hoisted_12, _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => _ctx.password = $event),\n    type: \"password\",\n    onChange: _cache[6] || (_cache[6] = $event => _ctx.checkPassword())\n  }, null, 544\n  /* HYDRATE_EVENTS, NEED_PATCH */\n  ), [[_vModelText, _ctx.password]]), _ctx.passwordDisplayed ? (_openBlock(), _createElementBlock(\"p\", _hoisted_13, \" Veuillez saisir un mot de passe \")) : _createCommentVNode(\"v-if\", true)]), _createCommentVNode(\" Message d'erreur en cas d'erreur côté serveur \"), _ctx.errorMessage ? (_openBlock(), _createElementBlock(\"p\", _hoisted_14, \" Oups ! Il semblerait que \" + _toDisplayString(_ctx.errorMessage), 1\n  /* TEXT */\n  )) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_15, [_createCommentVNode(\" Bouton désactivé \"), !_ctx.validatedFields() ? (_openBlock(), _createElementBlock(\"button\", _hoisted_16, \" Modifier \")) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Bouton activé \"), _ctx.validatedFields() ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 1,\n    class: \"bouton\",\n    onClick: _cache[7] || (_cache[7] = $event => $options.modifierProfil())\n  }, \" Modifier \")) : _createCommentVNode(\"v-if\", true), _createVNode(_component_router_link, {\n    to: \"/monprofil\",\n    class: \"bouton\"\n  }, {\n    default: _withCtx(() => [_hoisted_17]),\n    _: 1\n    /* STABLE */\n\n  })])])]);\n}","map":{"version":3,"mappings":"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","names":["class","_createElementVNode","_createElementBlock","_createCommentVNode","_createVNode","_component_HeaderHome","_toDisplayString","$data","_hoisted_3","_ctx","$event","type","_hoisted_6","_hoisted_8","_hoisted_10","onKeyup","_hoisted_12","onChange","onClick","$options","_component_router_link","to"],"sourceRoot":"","sources":["/Users/clemencebonneaud/Desktop/Dev/OpenClassrooms/Cours/OC_P7/code/frontend/groupomania-v1.0/src/views/ProfilModif.vue"],"sourcesContent":["<template>\n  <div class=\"profil\">\n    <!-- Header -->\n    <HeaderHome />\n\n    <h1>{{ titre }}</h1>\n\n    <!-- Formulaire -->\n    <div class=\"bloc\">\n      <form>\n        <label>Nom</label>\n        <input v-model=\"nom\" type=\"text\" />\n        <p class=\"formMessage\" v-if=\"!nomRegexValid()\">\n          <!-- Message qui apparaît si le champ est mal rempli -->\n          Veuillez saisir un nom valide\n        </p>\n\n        <label>Prenom</label>\n        <input v-model=\"prenom\" type=\"text\" />\n        <p class=\"formMessage\" v-if=\"!prenomRegexValid()\">\n          Veuillez saisir un prénom valide\n        </p>\n\n        <label>Poste au sein de l'entreprise</label>\n        <input v-model=\"job\" type=\"text\" />\n        <p class=\"formMessage\" v-if=\"!jobRegexValid()\">\n          Veuillez saisir un poste valide\n        </p>\n\n        <label>Email</label>\n        <input v-model=\"email\" type=\"email\" @keyup=\"analyseEmail()\" />\n        <p class=\"formMessage\" v-if=\"emailDisplayed\">\n          Veuillez saisir un email valide\n        </p>\n\n        <label>Mot de passe</label>\n        <input v-model=\"password\" type=\"password\" @change=\"checkPassword()\" />\n        <p class=\"formMessage\" v-if=\"passwordDisplayed\">\n          Veuillez saisir un mot de passe\n        </p>\n      </form>\n\n      <!-- Message d'erreur en cas d'erreur côté serveur -->\n      <p v-if=\"errorMessage\" class=\"errorMessage\">\n        Oups ! Il semblerait que {{ errorMessage }}\n      </p>\n\n      <div class=\"profilEdit\">\n        <!-- Bouton désactivé -->\n      <button v-if=\"!validatedFields()\" class=\"bouton bouton--disabled\">\n        Modifier\n      </button>\n\n      <!-- Bouton activé -->\n      <button v-if=\"validatedFields()\" class=\"bouton\" @click=\"modifierProfil()\">\n        Modifier\n      </button>\n        <router-link to=\"/monprofil\" class=\"bouton\">Annuler</router-link>\n      </div>\n    </div>\n  </div>\n</template>\n\n<!-- ////////////////////////////////////////////////// -->\n<!-- ////////////////////////////////////////////////// -->\n\n<script>\nimport HeaderHome from \"@/components/HeaderHome.vue\";\n\n// Axios\nconst axios = require(\"axios\");\nconst instance = axios.create({\n  baseURL: \"http://localhost:3000/api/\",\n});\n\nexport default {\n  name: \"ProfilDetail\",\n  path: \"/monprofil/modification\",\n  props: [\"\"],\n  data() {\n    return {\n      titre: \"Modifier mon profil\",\n      listForm: [\n        {\n          name: \"Nom\",\n          type: \"text\",\n        },\n        {\n          name: \"Prénom\",\n          type: \"text\",\n        },\n        {\n          name: \"Poste au sein de l'entreprise\",\n          type: \"text\",\n        },\n        {\n          name: \"Email\",\n          type: \"email\",\n        },\n        { name: \"Mot de passe\", type: \"password\" },\n      ],\n    };\n  },\n  methods: {\n    modifierProfil: function () {\n      let userInfos = {\n        lastName: this.nom,\n        firstName: this.prenom,\n        job: this.job,\n        email: this.email,\n        password: this.password,\n      };\n\n      const user = this.$store.state.userId;\n      instance\n        .put(`auth/modify/${user}`, userInfos)\n        .then((response) => {\n          console.log(response);\n          this.$router.push(\"/monprofil\"); // Redirection vers la page profil\n        })\n        .catch((error) => {\n          console.log(error);\n          this.errorMessage = error.response.data.error; // Affichage du message d'erreur\n        });\n    },\n  },\n  components: { HeaderHome },\n};\n</script>\n\n<style lang=\"scss\">\n.profilEdit {\n  display: flex;\n  justify-content: space-evenly;\n  & a {\n    margin: 0;\n  }\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}