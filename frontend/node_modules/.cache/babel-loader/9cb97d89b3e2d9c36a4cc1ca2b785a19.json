{"ast":null,"code":"import HeaderHome from \"@/components/HeaderHome.vue\"; // Axios\n\nconst axios = require(\"axios\");\n\nconst instance = axios.create({\n  baseURL: \"http://localhost:3000/api/\"\n});\nexport default {\n  name: \"ProfilDetail\",\n  path: \"/monprofil/modification\",\n  props: [\"\"],\n\n  data() {\n    return {\n      titre: \"Modifier mon profil\",\n      listForm: [{\n        name: \"Nom\",\n        type: \"text\"\n      }, {\n        name: \"Prénom\",\n        type: \"text\"\n      }, {\n        name: \"Poste au sein de l'entreprise\",\n        type: \"text\"\n      }, {\n        name: \"Email\",\n        type: \"email\"\n      }, {\n        name: \"Mot de passe\",\n        type: \"password\"\n      }]\n    };\n  },\n\n  methods: {\n    modifierProfil: function () {\n      let userInfos = {\n        lastName: this.nom,\n        firstName: this.prenom,\n        job: this.job,\n        email: this.email,\n        password: this.password\n      };\n      const user = this.$store.state.userId;\n      instance.put(`auth/modify/${user}`, userInfos).then(response => {\n        this.$router.push(\"/monprofil\"); // Redirection vers la page profil\n      }).catch(error => {\n        console.log(error);\n        this.errorMessage = error.response.data.error; // Affichage du message d'erreur\n      });\n    }\n  },\n  components: {\n    HeaderHome\n  }\n};","map":{"version":3,"mappings":"AAoBA,OAAOA,UAAP,MAAuB,6BAAvB,C,CAEA;;AACA,MAAMC,KAAI,GAAIC,OAAO,CAAC,OAAD,CAArB;;AACA,MAAMC,QAAO,GAAIF,KAAK,CAACG,MAAN,CAAa;AAC5BC,SAAO,EAAE;AADmB,CAAb,CAAjB;AAIA,eAAe;AACbC,MAAI,EAAE,cADO;AAEbC,MAAI,EAAE,yBAFO;AAGbC,OAAK,EAAE,CAAC,EAAD,CAHM;;AAIbC,MAAI,GAAG;AACL,WAAO;AACLC,WAAK,EAAE,qBADF;AAELC,cAAQ,EAAE,CACR;AACEL,YAAI,EAAE,KADR;AAEEM,YAAI,EAAE;AAFR,OADQ,EAKR;AACEN,YAAI,EAAE,QADR;AAEEM,YAAI,EAAE;AAFR,OALQ,EASR;AACEN,YAAI,EAAE,+BADR;AAEEM,YAAI,EAAE;AAFR,OATQ,EAaR;AACEN,YAAI,EAAE,OADR;AAEEM,YAAI,EAAE;AAFR,OAbQ,EAiBR;AAAEN,YAAI,EAAE,cAAR;AAAwBM,YAAI,EAAE;AAA9B,OAjBQ;AAFL,KAAP;AAsBD,GA3BY;;AA4BbC,SAAO,EAAE;AACPC,kBAAc,EAAE,YAAY;AAC1B,UAAIC,SAAQ,GAAI;AACdC,gBAAQ,EAAE,KAAKC,GADD;AAEdC,iBAAS,EAAE,KAAKC,MAFF;AAGdC,WAAG,EAAE,KAAKA,GAHI;AAIdC,aAAK,EAAE,KAAKA,KAJE;AAKdC,gBAAQ,EAAE,KAAKA;AALD,OAAhB;AAQA,YAAMC,IAAG,GAAI,KAAKC,MAAL,CAAYC,KAAZ,CAAkBC,MAA/B;AACAvB,cAAO,CACJwB,GADH,CACQ,eAAcJ,IAAK,EAD3B,EAC8BR,SAD9B,EAEGa,IAFH,CAESC,QAAD,IAAc;AAClB,aAAKC,OAAL,CAAaC,IAAb,CAAkB,YAAlB,EADkB,CACe;AAClC,OAJH,EAKGC,KALH,CAKUC,KAAD,IAAW;AAChBC,eAAO,CAACC,GAAR,CAAYF,KAAZ;AACA,aAAKG,YAAL,GAAoBH,KAAK,CAACJ,QAAN,CAAepB,IAAf,CAAoBwB,KAAxC,CAFgB,CAE+B;AAChD,OARH;AASD;AApBM,GA5BI;AAkDbI,YAAU,EAAE;AAAErC;AAAF;AAlDC,CAAf","names":["HeaderHome","axios","require","instance","create","baseURL","name","path","props","data","titre","listForm","type","methods","modifierProfil","userInfos","lastName","nom","firstName","prenom","job","email","password","user","$store","state","userId","put","then","response","$router","push","catch","error","console","log","errorMessage","components"],"sourceRoot":"","sources":["/Users/clemencebonneaud/Desktop/Dev/OpenClassrooms/Cours/OC_P7/code/frontend/groupomania-v1.0/src/views/ProfilModif.vue"],"sourcesContent":["<template>\n  <div class=\"profil\">\n    <HeaderHome />\n\n    <h1>{{ titre }}</h1>\n\n    <div class=\"bloc\">\n      <form v-for=\"(elt, listForm) in listForm\" :key=\"listForm\">\n        <label>{{ elt.name }}</label>\n        <input v-bind:type=\"elt.type\" />\n      </form>\n      <div class=\"profilEdit\">\n        <button class=\"bouton\" @click=\"modifierProfil\">Modifier</button>\n        <router-link to=\"/monprofil\" class=\"bouton\">Annuler</router-link>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport HeaderHome from \"@/components/HeaderHome.vue\";\n\n// Axios\nconst axios = require(\"axios\");\nconst instance = axios.create({\n  baseURL: \"http://localhost:3000/api/\",\n});\n\nexport default {\n  name: \"ProfilDetail\",\n  path: \"/monprofil/modification\",\n  props: [\"\"],\n  data() {\n    return {\n      titre: \"Modifier mon profil\",\n      listForm: [\n        {\n          name: \"Nom\",\n          type: \"text\",\n        },\n        {\n          name: \"Prénom\",\n          type: \"text\",\n        },\n        {\n          name: \"Poste au sein de l'entreprise\",\n          type: \"text\",\n        },\n        {\n          name: \"Email\",\n          type: \"email\",\n        },\n        { name: \"Mot de passe\", type: \"password\" },\n      ],\n    };\n  },\n  methods: {\n    modifierProfil: function () {\n      let userInfos = {\n        lastName: this.nom,\n        firstName: this.prenom,\n        job: this.job,\n        email: this.email,\n        password: this.password,\n      };\n\n      const user = this.$store.state.userId;\n      instance\n        .put(`auth/modify/${user}`, userInfos)\n        .then((response) => {\n          this.$router.push(\"/monprofil\"); // Redirection vers la page profil\n        })\n        .catch((error) => {\n          console.log(error);\n          this.errorMessage = error.response.data.error; // Affichage du message d'erreur\n        });\n    },\n  },\n  components: { HeaderHome },\n};\n</script>\n\n<style lang=\"scss\">\n.profilEdit {\n  display: flex;\n  justify-content: space-evenly;\n  & a {\n    margin: 0;\n  }\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}